# Blender_L4D2_Character_Tools
这是一个旨在提升求生之路2人物Mod制作效率的插件。

## 特性
- 运用预设的骨骼映射关系快速进行骨骼对齐与合并
- 插入动作关键帧辅助生成VRD文本
- 快速编写你的抖动骨骼参数
- 通过操控原始形态键的混合数值生成适配你面部规则的表情集

## 安装方式
1. 在[releases](https://github.com/Saberafter/Blender_L4D2_Character_Tools/releases)页面下载最新的zip压缩包
2. 打开Blender，找到编辑(Edit)-偏好设置(Preferences)-插件(Add-ons)
3. 在插件(Add-ons)选项卡中安装(Install)这个压缩包并启用(√)

## 使用说明
- 📌 **安装启用插件**: 安装启用插件后在N键面板中可以找到以💝作为侧栏名字的插件，点击💝进入插件面板

<p align="center">
  <img src="https://private-user-images.githubusercontent.com/46404382/318287921-a54cbdcd-2190-4908-b2cd-c88692273c86.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTE5MDUzODcsIm5iZiI6MTcxMTkwNTA4NywicGF0aCI6Ii80NjQwNDM4Mi8zMTgyODc5MjEtYTU0Y2JkY2QtMjE5MC00OTA4LWIyY2QtYzg4NjkyMjczYzg2LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMzElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzMxVDE3MTEyN1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWRjN2EzZTM0OTJkYmY5NDEyNDE5Yzg5MzU2ZmJkOWY2NDExZjFmMTJlNDcyOTAyMzg2OGNlODA1NzBkNTM4MTMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.DmX9dGS_2xwyh6UpKpIx3aK1rU24wQvPyflxj9RlgV8" alt="安装启用插件"/>
</p>

- 📌 **对齐骨骼**: 设置好官方骨架和自定义骨架，点击对齐骨骼，官方骨架的主要骨骼将被自动添加复制位置的骨骼约束，约束的目标骨骼则是在骨骼映射字典里编入过的骨骼

![插件使用说明](https://private-user-images.githubusercontent.com/46404382/318294620-99973516-a916-4cb4-9a72-0e4131220695.gif?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTE5MTE5OTYsIm5iZiI6MTcxMTkxMTY5NiwicGF0aCI6Ii80NjQwNDM4Mi8zMTgyOTQ2MjAtOTk5NzM1MTYtYTkxNi00Y2I0LTlhNzItMGU0MTMxMjIwNjk1LmdpZj9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMzElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzMxVDE5MDEzNlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTE5MmQzMTVmZTg1Y2IzYTExOWRjNThkYTRlZWUwN2FlMDkwZTdhMTc5ZmM1ZGJjZDY0ZDhiNzAzZGVkY2Q0MDAmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.QpBlxRnQk-X2nGGhxSd0-uXXI3VSnvO23t46GLTIOdY)

- **编写骨骼映射字典**: 前面讲到骨骼映射字典，我们可以先来了解一下它是如何工作的以及该如何编写它。
打开骨骼映射管理，第一栏是官方骨架的主要骨骼列表，每一项的骨骼都绑定着第二栏自定义骨列表中的某一个骨骼列表(经过去符号和转小写处理)，比如官骨的盆骨就绑定着hips以及pelvis，这就是对骨和嫁接过程中使用的骨骼映射关系。

![插件使用说明](https://private-user-images.githubusercontent.com/46404382/318300042-c5405d05-6586-4e56-bebe-cd0bfa2e2109.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTE5MTY4NDAsIm5iZiI6MTcxMTkxNjU0MCwicGF0aCI6Ii80NjQwNDM4Mi8zMTgzMDAwNDItYzU0MDVkMDUtNjU4Ni00ZTU2LWJlYmUtY2QwYmZhMmUyMTA5LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMzElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzMxVDIwMjIyMFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTNjODZmYWFiN2QwZTQxMmE0YjdlOTUyNzgyM2MxM2I3Nzc0YzQ0ZGQwZGNjY2FlNjU3ZWQ2YzZiNDU0MGRlNmImWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.v0ZeJDQAhPAqeCDbgfTYERrTxFjYOQG1vHk5giXEqO0)

选中自定义骨架并进入姿态模式的时候，就会多出第三行"骨骼名称",在第一行"官方骨骼列表"以及这儿选择好需要匹配的骨骼，点击添加，我们就可以给当前骨骼映射关系添加一项需要的骨骼名，新增骨骼会在第二栏中立刻刷新展示。这里的设计初衷是为了当有预设字典没有包含的骨骼名时，也可以自由进行字典的编辑与维护，做到全局操作都在blender中完成。

![插件使用说明](https://private-user-images.githubusercontent.com/46404382/318301303-c8ff0947-97e2-4bab-8b6c-6fa2f08893d2.gif?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTE5MTg2MzMsIm5iZiI6MTcxMTkxODMzMywicGF0aCI6Ii80NjQwNDM4Mi8zMTgzMDEzMDMtYzhmZjA5NDctOTdlMi00YmFiLThiNmMtNmZhMmYwODg5M2QyLmdpZj9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMzElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzMxVDIwNTIxM1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTQwYTZkMGYxMjk2NGJhYTcyM2U0ODAyYzk4YWNlMzc2Zjc3MTIzMjJlMzYyNGVmNmNkMzNjNTg0MGE0MjI4NWYmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.-ipoifGsWQIY3Zkhn40HE6WJTX1CxGef0lh_pqf4H44)

## 鸣谢
- 抹茶芝士✰：对骨脚本&灵感来源
- 残剑斩龙：3DMAX的VRD插件思路
- [SourceOps](https://github.com/bonjorno7/SourceOps)：获取骨骼位置/旋转坐标
- [BoneAnimCopy](https://github.com/kumopult/blender_BoneAnimCopy)：骨骼映射思路
- 发布人物制作教程的作者们

这个插件是为了帮助"求生之路2"的Mod制作者们更高效地进行制作工作。希望这个插件可以使他们的工作变得更轻松。

如果你对插件有任何问题或者建议，欢迎你在Github上提交issue。